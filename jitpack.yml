jdk:
  - openjdk17

before_install:
  # Install curl for downloading libraries (skip apt-get due to permissions)
  # curl is already available in JitPack environment
  # Ensure Java 17 is being used
  - java -version
  - echo "JAVA_HOME=$JAVA_HOME"

install:
  # Make download script executable
  - chmod +x download-ffmpeg-libs.sh
  
  # Set environment variable for library URL (you can override this)
  # - export FFMPEG_LIBS_URL="https://your-cdn.com/ffmpeg-android-libs.tar.gz"
  
  # The build.gradle.kts will automatically download libraries if needed
  - ./gradlew clean :ffmpegx:assembleRelease
  
  # Publish to Maven Local for JitPack
  - ./gradlew :ffmpegx:publishToMavenLocal